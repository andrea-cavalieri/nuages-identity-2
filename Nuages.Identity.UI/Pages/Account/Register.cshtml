@page
@model Nuages.Identity.UI.Pages.Account.Login
@inject IOptions<Nuages.Web.Recaptcha.GoogleRecaptchaOptions> RecaptchaOptions
@inject IOptions<UIOptions> UIOptions

@{
    ViewData["title"] = Localizer["register:title"];

}
<partial name="Shared/ErrorList"/>

<div class="flex justify-center mt-6">

    <i class="fas fa-spinner fa-spin fa-3x" v-if="status == 'sending'" v-show="status == 'sending'" style="display: none"></i>
    <div class="flex flex-col " v-if="status == 'done'" v-show="status == 'done'" style="display: none">
        <i class="fa fa-check-circle text-green-700 fa-3x text-center"></i>
        <span class="mt-4">@Localizer["register:accountCreated"]</span>
    </div>

</div>

<form class="space-y-4 mt-4" method="POST" v-on:submit.prevent="login" id="formRegister" v-if="status == ''">

    <div class="mt-1">
        <input id="email" name="email" autofocus="" v-model="email" placeholder="@Localizer["email"]" required class="text-box" type="email">
    </div>

    <div class="mt-1">
        <input id="password" name="password" type="password" v-model="password" placeholder="@Localizer["login:password"]" autocomplete="current-password" required class="text-box ">
    </div>

    <div class="mt-1">
        <input id="passwordConfirm" name="passwordConfirm" type="password" v-model="passwordConfirm" placeholder="@Localizer["register:passwordConfirmation"]" autocomplete="current-password" required class="text-box ">
    </div>

    <div class="mt-1">
        <button v-on:click.prevent="register" class="btn btn-primary">
            @Localizer["register:button"]
        </button>
    </div>
    <div class="mt-1">
        <partial name="Shared/PasswordRequirements"/>
    </div>


</form>

@section Scripts
{
    <script>
        var emailRequiredMessage = "@string.Format(Localizer["errorMessage:required"]!, Localizer["email"])";
        var passwordRequiredMessage = "@string.Format(Localizer["errorMessage:required"]!, Localizer["login:password"])";
        var passwordConfirmationRequiredMessage = "@string.Format(Localizer["errorMessage:required"]!, Localizer["register:passwordConfirmation"])";
        var passwordMustMatch = "@Localizer["register:passwordMustMatch"]";
        var emailInvalidMessage = "@Localizer["errorMessage:invalidEmail"]";
        var recaptcha = '@RecaptchaOptions.Value.SiteKey';
        var returnUrl = '@Html.Raw(Model.ReturnUrl)';
    </script>
    <script src="/js/pages/register.js"></script>
}

@section MainFooter
{
    <partial name="Shared/BackToLogin"/>
}