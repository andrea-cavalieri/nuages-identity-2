@page
@model Nuages.Identity.UI.Pages.Account.Manage.PhoneModel

@{
    ViewData["Title"] = Localizer["changePhone:title"];
}

<div id="app" >
 <h2 class="page-header">@Localizer["changePhone.title"]</h2>
    
    <div class="flex justify-center">
        <i class="fas fa-spinner fa-spin fa-3x" v-if="status == 'sending'" v-show="status == 'sending'" style="display: none"></i>
        <div class="flex flex-col " v-if="status == 'done'" v-show="status == 'done'" style="display: none">
            <i class="fa fa-check-circle text-green-700 fa-3x text-center"></i>
            <span class="mt-4">@Localizer["changePhone:success"]</span>
        </div>
    </div>

    
    <form class="space-y-4" method="POST" v-on:submit.prevent="changePhone" id="formChangePhone" v-if="status != 'sending'">
        <span class="text-gray-500" v-if="status == ''">@Localizer["changePhone:instructions"]</span>
        <div>
            <strong>@Localizer["changePhone:currentPhoneNumber"]</strong>&nbsp;
            <span>@Model.PhoneNumber</span>
        </div>
                
        <partial name="Shared/ErrorList"/>
       
        <input id="phone" name="phone" type="text" autofocus="" v-model="phone" placeholder="@Localizer["changePhone:newPhoneNumber"]" required class="text-box">
        
        <span class="text-gray-500"  v-if="status == 'sent'">@Localizer["changePhone:instructions"]</span>
        <input id="code" name="code" type="text" autofocus="" v-model="code" placeholder="@Localizer["changePhone:code"]" required class="text-box"  v-if="status == 'sent'">
        
        <button v-on:click.prevent="sendPhoneChangeMessage" class="primary full" v-if="status == ''">
            @Localizer["changePhone:sendMessage"]
        </button>
         <button v-on:click.prevent="chagePhone" class="primary full" v-if="status == 'sent'">
            @Localizer["changePhone:submit"]
        </button>
    </form>

</div>


@section Scripts
{
    <script>
        var phoneRequiredMessage = "@string.Format(Localizer["errorMessage:required"]!, Localizer["changePhone:phone"])";  
        var codeRequiredMessage = "@string.Format(Localizer["errorMessage:required"]!, "Code")";  
         
    </script>
    <script src="/js/pages/manage/phone.js"></script>
}